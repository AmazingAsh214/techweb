% Linux 

# System

## Network

### Interfaces

```bash 
$ sudo ifconfig <interface> <address> netmask <mask>
```

### Routes

```bash
ip route show
ip route add 10.20.0.0/24 dev rndis0
ip route add default via 10.20.30.1
```

### Name resolution

In recent Linux Mint / Ubuntu distribution, you no longer directly edit /etc/resolv.conf to specify your name server as the file's header says:

```bash
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
```

Instead, you specify name servers in /etc/resolvconf/resolv.conf.d/base
```bash
$ cat /etc/resolvconf/resolv.conf.d/base
nameserver 4.2.2.2
nameserver 8.8.8.8
nameserver 8.8.4.4
```

If there are some name servers you want to favour, then, you need to put them
in `/etc/resolvconf/resolv.conf.d/head`.

Once this is done, you need to update name resolution with the command `resolvconf -u`.

### Troubleshooting

I had issues with my Ethernet link. In my case, it was solved by commenting out dns=dnsmasq in NetworkManager:

```
[main]
plugins=ifupdown,keyfile,ofono
#dns=dnsmasq

[ifupdown]
managed=false
```

### IPv6

In /etc/sysctl.conf

```
    # Disable IPv6
    net.ipv6.conf.all.disable_ipv6 = 1
```

## Locale

`localectl set-locale LANG=en_US.utf8`

## Package management

To re-install a package:
```bash
$ sudo apt-get --reinstall install package
```

## NTP

To list NTP servers I use:

```
$ ntpq -p
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
*ks3352891.kimsu 138.96.64.10     2 u   99  128  377   37.876   31.229  24.093
...
```


## ZFS

### Install ZFS

On Linux Mint 18:

```bash
sudo apt-get install zfs-dkms zfsutils-linux
```

## Firewall

```bash
$ iptables -t nat -F ==> flush the NAT table
```


## Adding user to group and take into account immediately

1. Add user to new group B.
2. Get the current group of the user:
```bash
$ id -g
```
Let's call that group A.
3. Change group to B:
```bash
$ newgrp B
```
4. Reset back to original group:
```bash
$ newgrp A
```

## Adding udev rules without rebooting

```bash
sudo udevadm control --reload-rules
sudo service udev restart
sudo udevadm trigger
```


# Sound

## Listing devices

```bash
$ sudo aplay -l
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: ALC269VB Analog [ALC269VB Analog]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
card 1: J20 [Jabra EVOLVE 20], device 0: USB Audio [USB Audio]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
```


# Apps

## Mail

d * removes all email
q

## Recording desktop

```
$ gtk-recordmydesktop
```

To stop: Ctrl-Mod-s

## Bluez

```bash 
$ wget http://www.kernel.org/pub/linux/bluetooth/bluez-5.20.tar.xz
$ tar -xvf bluez-5.20.tar.xz
$ cd bluez-5.20/
$ sudo apt-get install libudev-dev libical-dev libreadline-dev
$ ./configure –enable-library –disable-systemd
$ make
$ make check
$ sudo make install
$ sudo cp attrib/gatttool /usr/bin/
$sudo cp tools/btmgmt /usr/bin/
```

## Useful packages (at some point...)

- To install glib2:
```
sudo apt-get install libgtk2.0-dev
```


- To install [Java](http://tecadmin.net/install-oracle-java-8-jdk-8-ubuntu-via-ppa/):

`export JAVA_HOME=/usr/lib/jvm/java-8-oracle`
